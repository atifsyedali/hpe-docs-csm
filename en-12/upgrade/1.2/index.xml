<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>1.2 on Cray System Management (CSM)</title>
    <link>/docs-csm/en-12/upgrade/1.2/</link>
    <description>Recent content in 1.2 on Cray System Management (CSM)</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-US</language>
    <lastBuildDate>Tue, 05 Apr 2022 03:13:15 +0000</lastBuildDate><atom:link href="/docs-csm/en-12/upgrade/1.2/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title></title>
      <link>/docs-csm/en-12/upgrade/1.2/scripts/sls/sls_utils/readme/</link>
      <pubDate>Tue, 05 Apr 2022 03:13:13 +0000</pubDate>
      
      <guid>/docs-csm/en-12/upgrade/1.2/scripts/sls/sls_utils/readme/</guid>
      <description>This is a reusable python library for safely interacting with SLS network data (in JSON format).
The library has been tested against python version 3.6 and up.</description>
    </item>
    
    <item>
      <title>Upgrade Automation</title>
      <link>/docs-csm/en-12/upgrade/1.2/scripts/upgrade/upgrade_automation/</link>
      <pubDate>Tue, 05 Apr 2022 03:13:13 +0000</pubDate>
      
      <guid>/docs-csm/en-12/upgrade/1.2/scripts/upgrade/upgrade_automation/</guid>
      <description>Upgrade Automation This document describes how we automate upgrade process. In a nutshell, an upgrade is:
 Upload new artifacts into a running system Rebuild each NCN with the newly uploaded images Deploy new charts after all NCNs are upgraded.  Prerequisites Everything we need before upgrading an NCN.
 NOTE:
The prerequisites.sh script is required to run on both ncn-m001 and ncn-m002. If an action is only needed to run once, developers must add logic to avoid running this action both times the script is executed.</description>
    </item>
    
    <item>
      <title>Upgrade SLS Offline From 1.0.x To Csm 1.2</title>
      <link>/docs-csm/en-12/upgrade/1.2/scripts/sls/readme.sls_upgrade/</link>
      <pubDate>Tue, 05 Apr 2022 03:13:13 +0000</pubDate>
      
      <guid>/docs-csm/en-12/upgrade/1.2/scripts/sls/readme.sls_upgrade/</guid>
      <description>Upgrade SLS Offline from CSM 1.0.x to CSM 1.2 TL;DR  Get a token:  export TOKEN=$(curl -s -k -S -d grant_type=client_credentials -d client_id=admin-client -d client_secret=`kubectl get secrets admin-client-auth -o jsonpath=&amp;#39;{.data.client-secret}&amp;#39; | base64 -d` https://api-gw-service-nmn.local/keycloak/realms/shasta/protocol/openid-connect/token | jq -r &amp;#39;.access_token&amp;#39;)  Extract SLS data to a file:  curl -k -H &amp;#34;Authorization: Bearer ${TOKEN}&amp;#34; https://api-gw-service-nmn.local/apis/sls/v1/dumpstate | jq -S . &amp;gt; sls_input_file.json  Upgrade SLS data (Example 1): Upgrade, using the CHN as the system default route (will by default output to migrated_sls_file.</description>
    </item>
    
    <item>
      <title>Stage 5 - Perform NCN Personalization</title>
      <link>/docs-csm/en-12/upgrade/1.2/stage_5/</link>
      <pubDate>Tue, 05 Apr 2022 03:13:12 +0000</pubDate>
      
      <guid>/docs-csm/en-12/upgrade/1.2/stage_5/</guid>
      <description>Stage 5 - Perform NCN Personalization Procedure   Set the root user password and SSH keys before running NCN personalization. The location where the password is stored in Vault has changed since previous CSM versions. See Configure the Root Password and Root SSH Keys in Vault.
  If custom configuration content was merged with content from a previous CSM installation, merge the new CSM configuration in with it in the csm-config-management git repository.</description>
    </item>
    
    <item>
      <title>1.0.0 Or Later To 1.2.0 Upgrade Process (wip)</title>
      <link>/docs-csm/en-12/upgrade/1.2/readme/</link>
      <pubDate>Tue, 05 Apr 2022 03:13:11 +0000</pubDate>
      
      <guid>/docs-csm/en-12/upgrade/1.2/readme/</guid>
      <description>CSM 1.0.0 or later to 1.2.0 Upgrade Process (WIP) #NOTE: this is a WIP doc
Introduction This document is intended to guide an administrator through the upgrade process going from Cray Systems Management v1.0 to v1.2. When upgrading a system, this top-level README.md file should be followed top to bottom, and the content on this top level page is meant to be terse. See the additional files in the various directories under the resource_material directory for additional reference material in support of the processes/scripts mentioned explicitly on this page.</description>
    </item>
    
    <item>
      <title>Stage 0 - Prerequisites And Preflight Checks</title>
      <link>/docs-csm/en-12/upgrade/1.2/stage_0_prerequisites/</link>
      <pubDate>Tue, 05 Apr 2022 03:13:11 +0000</pubDate>
      
      <guid>/docs-csm/en-12/upgrade/1.2/stage_0_prerequisites/</guid>
      <description>Stage 0 - Prerequisites and Preflight Checks  NOTE: CSM-1.0.1 or higher is required in order to upgrade to CSM-1.2.0
  Stage 0.1 - Install latest docs RPM Stage 0.2 - Reduce CPU Limits If Needed Stage 0.3 - Update SLS Stage 0.4 - Upgrade Management Network Stage 0.5 - Prerequisites Check Stage 0.6 - Backup Workload Manager Data Stage 0.7 - Continue to Stage 1  Stage 0.1 - Install latest docs RPM   Install latest document RPM package and prepare assets:</description>
    </item>
    
    <item>
      <title>Stage 1 - Ceph Image Upgrade</title>
      <link>/docs-csm/en-12/upgrade/1.2/stage_1/</link>
      <pubDate>Tue, 05 Apr 2022 03:13:11 +0000</pubDate>
      
      <guid>/docs-csm/en-12/upgrade/1.2/stage_1/</guid>
      <description>Stage 1 - Ceph image upgrade   Run ncn-upgrade-ceph-nodes.sh for ncn-s001. Follow output of the script carefully. The script will pause for manual interaction.
ncn-m001# /usr/share/doc/csm/upgrade/1.2/scripts/upgrade/ncn-upgrade-ceph-nodes.sh ncn-s001  NOTE: You may need to reset the root password for each node after it is rebooted
 IMPORTANT: You may encounter an error like shown below. If this is the case, just re-run the same command for the node upgrade and it will pick up at that point and conitune.</description>
    </item>
    
    <item>
      <title>Stage 2 - Kubernetes Upgrade From 1.19.9 To 1.20.13</title>
      <link>/docs-csm/en-12/upgrade/1.2/stage_2/</link>
      <pubDate>Tue, 05 Apr 2022 03:13:11 +0000</pubDate>
      
      <guid>/docs-csm/en-12/upgrade/1.2/stage_2/</guid>
      <description>Stage 2 - Kubernetes Upgrade from 1.19.9 to 1.20.13  NOTE: During the CSM-0.9 install the LiveCD containing the initial install files for this system should have been unmounted from the master node when rebooting into the Kubernetes cluster. The scripts run in this section will also attempt to unmount/eject it if found to ensure the USB stick does not get erased.
 Stage 2.1   Run ncn-upgrade-master-nodes.sh for ncn-m002.</description>
    </item>
    
    <item>
      <title>Stage 3 - Service Upgrades</title>
      <link>/docs-csm/en-12/upgrade/1.2/stage_3/</link>
      <pubDate>Tue, 05 Apr 2022 03:13:11 +0000</pubDate>
      
      <guid>/docs-csm/en-12/upgrade/1.2/stage_3/</guid>
      <description>Stage 3 - CSM Service Upgrades   Prepare assets:
ncn-m002# CSM_RELEASE=csm-1.2.0   Internet Connected
  Set the ENDPOINT variable to the URL of the directory containing the CSM release tarball.
In other words, the full URL to the CSM release tarball will be ${ENDPOINT}${CSM_RELEASE}.tar.gz
NOTE This step is optional for Cray/HPE internal installs.
ncn-m002# ENDPOINT=https://put.the/url/here/   Run the script
ncn-m002# /usr/share/doc/csm/upgrade/1.2/scripts/upgrade/prepare-assets.sh --csm-version [CSM_RELEASE] --endpoint [ENDPOINT]     Air Gapped (replace the PATH_TO below with the location of the CSM release tarball)</description>
    </item>
    
    <item>
      <title>Stage 4 - Ceph Upgrade</title>
      <link>/docs-csm/en-12/upgrade/1.2/stage_4/</link>
      <pubDate>Tue, 05 Apr 2022 03:13:11 +0000</pubDate>
      
      <guid>/docs-csm/en-12/upgrade/1.2/stage_4/</guid>
      <description>Stage 4 - Ceph Upgrade Addresses CVEs  CVE-2021-3531: Swift API denial of service. CVE-2021-3524: HTTP header injects via CORS in RGW. CVE-2021-3509: Dashboard XSS via token cookie. CVE-2021-20288: Unauthorized global_id reuse in cephx.  IMPORTANT:
  This upgrade is performed using the ceph orchestrator. The upgrade includes all fixes from v15.2.9 through to v15.2.15 listed here Ceph version index   Procedure Upgrade   Check to ensure the upgrade is possible.</description>
    </item>
    
  </channel>
</rss>
